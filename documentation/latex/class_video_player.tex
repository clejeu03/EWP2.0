\hypertarget{class_video_player}{\section{\-Video\-Player \-Class \-Reference}
\label{class_video_player}\index{\-Video\-Player@{\-Video\-Player}}
}


{\ttfamily \#include $<$videoplayer.\-h$>$}

\subsection*{\-Public \-Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_video_player_a96b3bad4d8680ba4b41b05aeabcd26b1}{open\-File} ()
\item 
void \hyperlink{class_video_player_a13ba0d270e849566f33ceffd7fb425c0}{play} ()
\item 
void \hyperlink{class_video_player_a7e7d8a5f78a0050b463d303a6ce0df4f}{display\-Time} (int)
\end{DoxyCompactItemize}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_video_player_a1d43337dac90ba3ec1ba178f4b1ddceb}{\-Video\-Player} (\-Q\-Widget $\ast$parent=0)
\item 
void \hyperlink{class_video_player_a9f33fb15ac14c330e8b6fda8d9cf4164}{set\-New\-Media} (const \-Q\-String $\ast$filename)
\item 
\hyperlink{class_video_player_a84982600649b54d2fa2ddb4efee2349f}{$\sim$\-Video\-Player} ()
\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}


\-Definition at line 18 of file videoplayer.\-h.



\subsection{\-Constructor \& \-Destructor \-Documentation}
\hypertarget{class_video_player_a1d43337dac90ba3ec1ba178f4b1ddceb}{\index{\-Video\-Player@{\-Video\-Player}!\-Video\-Player@{\-Video\-Player}}
\index{\-Video\-Player@{\-Video\-Player}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{\-Video\-Player}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Video\-Player\-::\-Video\-Player} (
\begin{DoxyParamCaption}
\item[{\-Q\-Widget $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_video_player_a1d43337dac90ba3ec1ba178f4b1ddceb}


\-Definition at line 6 of file videoplayer.\-cpp.



\-References display\-Time(), open\-File(), and play().


\begin{DoxyCode}
    : QWidget(parent)
    , mediaPlayer(0, QMediaPlayer::VideoSurface)
    , playButton(0)
    , positionSlider(0)
    , label(0)
{
    QVideoWidget *videoWidget = new QVideoWidget;

    QAbstractButton *openButton = new QPushButton(tr("Open..."));
    connect(openButton, SIGNAL(clicked()), this, SLOT(openFile()));

    playButton = new QPushButton;
    playButton->setEnabled(false);
    playButton->setIcon(style()->standardIcon(QStyle::SP_MediaPlay));

    connect(playButton, SIGNAL(clicked()),
            this, SLOT(play()));

    positionSlider = new QSlider(Qt::Horizontal);
    positionSlider->setRange(0, 0);

    connect(positionSlider, SIGNAL(sliderMoved(int)),
            this, SLOT(setPosition(int)));

    label = new QLabel();
    displayTime(0);

    connect(positionSlider, SIGNAL(valueChanged(int)),
            this, SLOT(displayTime(int)));

    QBoxLayout *controlLayout = new QHBoxLayout;
    controlLayout->setMargin(0);
    controlLayout->addWidget(openButton);
    controlLayout->addWidget(playButton);
    controlLayout->addWidget(positionSlider);
    controlLayout->addWidget(label);

    QBoxLayout *layout = new QVBoxLayout;
    layout->addWidget(videoWidget);
    layout->addLayout(controlLayout);

    setLayout(layout);

    mediaPlayer.setVideoOutput(videoWidget);
    connect(&mediaPlayer, SIGNAL(stateChanged(QMediaPlayer::State)),
            this, SLOT(mediaStateChanged(QMediaPlayer::State)));
    connect(&mediaPlayer, SIGNAL(positionChanged(qint64)), this, SLOT(
      positionChanged(qint64)));
    connect(&mediaPlayer, SIGNAL(durationChanged(qint64)), this, SLOT(
      durationChanged(qint64)));
}
\end{DoxyCode}
\hypertarget{class_video_player_a84982600649b54d2fa2ddb4efee2349f}{\index{\-Video\-Player@{\-Video\-Player}!$\sim$\-Video\-Player@{$\sim$\-Video\-Player}}
\index{$\sim$\-Video\-Player@{$\sim$\-Video\-Player}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{$\sim$\-Video\-Player}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Video\-Player\-::$\sim$\-Video\-Player} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_video_player_a84982600649b54d2fa2ddb4efee2349f}


\-Definition at line 57 of file videoplayer.\-cpp.


\begin{DoxyCode}
{
}
\end{DoxyCode}


\subsection{\-Member \-Function \-Documentation}
\hypertarget{class_video_player_a7e7d8a5f78a0050b463d303a6ce0df4f}{\index{\-Video\-Player@{\-Video\-Player}!display\-Time@{display\-Time}}
\index{display\-Time@{display\-Time}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{display\-Time}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Video\-Player\-::display\-Time} (
\begin{DoxyParamCaption}
\item[{int}]{value}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}\label{class_video_player_a7e7d8a5f78a0050b463d303a6ce0df4f}
\-This function create the time label placed under the slider and that display current time of the selected frame toward the total duration of the video ; the format changes as the video duration is superior to an hour or not between \char`\"{}mm\-:ss\char`\"{} and \char`\"{}hh\-:mm\-:ss\char`\"{}. 

\-Definition at line 61 of file videoplayer.\-cpp.


\begin{DoxyCode}
                                      {
    QTime originTime(0,0,0);
    QTime hour(1,0,0);

    double mediaDuration = mediaPlayer.duration();
    QTime current_time = originTime.addSecs(qRound((double)value/1000));
    QTime duration = originTime.addSecs(qRound(mediaDuration/1000));

    /*Display time format according to the video duration : "mm:ss"  or 
       "hh:mm:ss" */
    if(duration < hour ){
        label->setText(current_time.toString("mm:ss")+" / "+duration.toString("
      mm:ss"));
    }else{
        label->setText(current_time.toString()+" / "+duration.toString());
    }
}
\end{DoxyCode}
\hypertarget{class_video_player_a96b3bad4d8680ba4b41b05aeabcd26b1}{\index{\-Video\-Player@{\-Video\-Player}!open\-File@{open\-File}}
\index{open\-File@{open\-File}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{open\-File}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Video\-Player\-::open\-File} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}\label{class_video_player_a96b3bad4d8680ba4b41b05aeabcd26b1}


\-Definition at line 80 of file videoplayer.\-cpp.


\begin{DoxyCode}
{
    QString fileName = QFileDialog::getOpenFileName(this, tr("Open Movie"),
      QDir::homePath());
    if (!fileName.isEmpty()) {
        mediaPlayer.setMedia(QUrl::fromLocalFile(fileName));

        playButton->setEnabled(true);
    }
}
\end{DoxyCode}
\hypertarget{class_video_player_a13ba0d270e849566f33ceffd7fb425c0}{\index{\-Video\-Player@{\-Video\-Player}!play@{play}}
\index{play@{play}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{play}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Video\-Player\-::play} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}slot\mbox{]}}}}\label{class_video_player_a13ba0d270e849566f33ceffd7fb425c0}


\-Definition at line 90 of file videoplayer.\-cpp.


\begin{DoxyCode}
{
    switch(mediaPlayer.state()) {
    case QMediaPlayer::PlayingState:
        mediaPlayer.pause();
        break;
    default:
        mediaPlayer.play();
        break;
    }
}
\end{DoxyCode}
\hypertarget{class_video_player_a9f33fb15ac14c330e8b6fda8d9cf4164}{\index{\-Video\-Player@{\-Video\-Player}!set\-New\-Media@{set\-New\-Media}}
\index{set\-New\-Media@{set\-New\-Media}!VideoPlayer@{\-Video\-Player}}
\subsubsection[{set\-New\-Media}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Video\-Player\-::set\-New\-Media} (
\begin{DoxyParamCaption}
\item[{const \-Q\-String $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{class_video_player_a9f33fb15ac14c330e8b6fda8d9cf4164}


\-Definition at line 129 of file videoplayer.\-cpp.


\begin{DoxyCode}
{
    if (!filename->isEmpty()) {
        mediaPlayer.setMedia( QUrl::fromLocalFile((*filename)) );
        playButton->setEnabled(true);
    }
}
\end{DoxyCode}


\-The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
\hyperlink{videoplayer_8h}{videoplayer.\-h}\item 
\hyperlink{videoplayer_8cpp}{videoplayer.\-cpp}\end{DoxyCompactItemize}
